<div
  class="glass-card p-5 h-full flex flex-col cursor-pointer group"
  (click)="redirectToVacancyPage()"
>
  <!-- Header -->
  <div class="flex items-start justify-between mb-4">
    <div class="flex-1">
      <div *ngIf="vacancy?.archived" class="inline-flex items-center gap-1 px-2 py-1 rounded-full bg-error-500/20 text-error-500 text-xs font-medium mb-2">
        <mat-icon class="text-sm">archive</mat-icon>
        В архиве
      </div>
      <h3 class="text-lg font-semibold text-[var(--text-primary)] group-hover:text-gradient transition-all line-clamp-2">
        {{ vacancy?.title }}
      </h3>
      <p class="text-sm text-[var(--text-secondary)] mt-1">{{ company?.name }}</p>
    </div>
    
    <!-- Interaction Icon -->
    <div class="ml-3 flex-shrink-0">
      <div *ngIf="interaction?.type === InteractionType.Like" class="w-8 h-8 rounded-full bg-success-500/20 flex items-center justify-center">
        <mat-icon class="text-success-500 text-base">favorite</mat-icon>
      </div>
      <div *ngIf="interaction?.type === InteractionType.Dislike" class="w-8 h-8 rounded-full bg-error-500/20 flex items-center justify-center">
        <mat-icon class="text-error-500 text-base">thumb_down</mat-icon>
      </div>
      <div *ngIf="interaction?.type === InteractionType.Click" class="w-8 h-8 rounded-full bg-primary-500/20 flex items-center justify-center">
        <mat-icon class="text-primary-500 text-base">visibility</mat-icon>
      </div>
    </div>
  </div>

  <!-- Experience & Type -->
  <div class="flex flex-wrap gap-2 mb-4">
    <div *ngIf="vacancy?.vacancyDetails?.experience?.min || vacancy?.vacancyDetails?.experience?.max" 
         class="glass-tag text-xs inline-flex items-center gap-1.5">
      <mat-icon class="text-sm">work_history</mat-icon>
      <span *ngIf="vacancy?.vacancyDetails?.experience?.min">от {{ vacancy?.vacancyDetails?.experience?.min }}</span><span *ngIf="vacancy?.vacancyDetails?.experience?.max"> до {{ vacancy?.vacancyDetails?.experience?.max }}</span> лет
    </div>
    <div class="glass-tag text-xs inline-flex items-center gap-1.5">
      <mat-icon class="text-sm">schedule</mat-icon>
      {{ vacancy?.employmentType }}
    </div>
  </div>

  <!-- Salary -->
  <div *ngIf="vacancy?.vacancyDetails?.salary" class="mb-4">
    <div class="text-2xl font-bold text-gradient">
      <span *ngIf="vacancy?.vacancyDetails?.salary?.original?.min || vacancy?.vacancyDetails?.salary?.min">
        {{ (vacancy?.vacancyDetails?.salary?.original?.min || vacancy?.vacancyDetails?.salary?.min) | number:'1.0-0' }}
      </span>
      <span *ngIf="vacancy?.vacancyDetails?.salary?.original?.max || vacancy?.vacancyDetails?.salary?.max">
        — {{ (vacancy?.vacancyDetails?.salary?.original?.max || vacancy?.vacancyDetails?.salary?.max) | number:'1.0-0' }}
      </span>
      <span class="text-lg font-medium text-[var(--text-secondary)] ml-1">
        {{ vacancy?.vacancyDetails?.salary?.original?.currency || vacancy?.vacancyDetails?.salary?.currency }}
      </span>
    </div>
  </div>

  <!-- Skills -->
  <div *ngIf="vacancy?.vacancyDetails?.skills?.length" class="mb-4">
    <div class="flex flex-wrap gap-1.5">
      <span 
        *ngFor="let skill of vacancy?.vacancyDetails?.skills | slice:0:4"
        class="px-2 py-1 rounded-lg text-xs font-medium bg-primary-500/10 text-primary-500 dark:bg-primary-400/20 dark:text-primary-300"
      >
        {{ skill }}
      </span>
      <span 
        *ngIf="(vacancy?.vacancyDetails?.skills?.length || 0) > 4"
        class="px-2 py-1 rounded-lg text-xs font-medium bg-[var(--bg-tertiary)] text-[var(--text-muted)]"
      >
        +{{ (vacancy?.vacancyDetails?.skills?.length || 0) - 4 }}
      </span>
    </div>
  </div>

  <!-- Technologies -->
  <div *ngIf="vacancy?.vacancyDetails?.technologies?.length" class="mb-4">
    <div class="flex flex-wrap gap-1.5">
      <span 
        *ngFor="let tech of vacancy?.vacancyDetails?.technologies | slice:0:3"
        class="px-2 py-1 rounded-lg text-xs font-medium bg-accent-500/10 text-accent-600 dark:bg-accent-400/20 dark:text-accent-300"
      >
        {{ tech }}
      </span>
      <span 
        *ngIf="(vacancy?.vacancyDetails?.technologies?.length || 0) > 3"
        class="px-2 py-1 rounded-lg text-xs font-medium bg-[var(--bg-tertiary)] text-[var(--text-muted)]"
      >
        +{{ (vacancy?.vacancyDetails?.technologies?.length || 0) - 3 }}
      </span>
    </div>
  </div>

  <!-- Footer -->
  <div class="mt-auto pt-4 border-t border-[var(--border-color)] relative">
    <div class="flex items-center justify-between text-xs text-[var(--text-muted)] pr-8">
      <span class="inline-flex items-center gap-1.5">
        <mat-icon class="text-sm">calendar_today</mat-icon>
        {{ vacancy?.createdAt | date:'d MMM' }}
      </span>
      <span class="inline-flex items-center gap-1.5">
        <mat-icon class="text-sm">timer</mat-icon>
        до {{ vacancy?.deadlineAt | date:'d MMM' }}
      </span>
    </div>
    
    <!-- Hover Arrow -->
    <div class="absolute bottom-0 right-0 opacity-0 group-hover:opacity-100 transition-opacity">
      <mat-icon class="text-gradient text-lg">arrow_forward</mat-icon>
    </div>
  </div>
</div>
