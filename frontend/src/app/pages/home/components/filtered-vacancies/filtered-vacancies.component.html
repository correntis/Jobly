<div class="flex flex-row">
  <section class="p-6 bg-gray-100 rounded-lg shadow-md mt-3 max-w-96">
    <div class="sticky top-20 w-[15vw]">
      <div class="flex justify-between">
        <h2 class="text-2xl font-bold text-gray-700 mb-4">Filters</h2>

        <button
          type="submit"
          (click)="applyFilters()"
          mat-raised-button
          color="primary"
        >
          Apply Filters
        </button>
      </div>

      <form [formGroup]="vacanciesFilterForm" class="h-[80vh] overflow-y-auto">
        <app-dynamic-form-array
          formArrayName="requirements"
          label="Requirements"
          placeholder="Requirements"
          [formArray]="getFormArrayControls('requirements')"
        />

        <app-dynamic-form-array
          formArrayName="skills"
          label="Skills"
          placeholder="Skills"
          [formArray]="getFormArrayControls('skills')"
        />

        <app-dynamic-form-array
          formArrayName="tags"
          label="Tags"
          placeholder="Tags"
          [formArray]="getFormArrayControls('tags')"
        />

        <app-dynamic-form-array
          formArrayName="responsibilities"
          label="Responsibilities"
          placeholder="Responsibilities"
          [formArray]="getFormArrayControls('responsibilities')"
        />

        <app-dynamic-form-array
          formArrayName="benefits"
          label="Benefits"
          placeholder="Benefits"
          [formArray]="getFormArrayControls('benefits')"
        />

        <app-dynamic-form-array
          formArrayName="technologies"
          label="Technologies"
          placeholder="Technologies"
          [formArray]="getFormArrayControls('technologies')"
        />

        <app-dynamic-form-array
          formArrayName="education"
          label="Education"
          placeholder="Education"
          [formArray]="getFormArrayControls('education')"
        />

        <app-vacancy-languages-form
          formArrayName="languages"
          [formArray]="getFormArrayControls('languages')"
        />

        <!-- Experience -->
        <app-vacancy-experience-form [jobExperiencesForm]="experience" />

        <!-- Salary -->
        <app-vacancy-salary-form [salaryForm]="salary" />
      </form>
    </div>
  </section>

  <div>
    <div
      class="vacancies-container bg-[#e2e2e2] grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-3 px-5 py-3 items-stretch"
    >
      <ng-container *ngFor="let vacancy of vacanciesList; let i = index">
        <app-compact-vacancy [vacancy]="vacancy"></app-compact-vacancy>

        <div
          *ngIf="(i + 1) % 3 === 0"
          class="row-delimiter col-span-full border-t-2 border-gray-300 my-6"
        ></div>
      </ng-container>
    </div>

    <div
      *ngIf="
        vacanciesList && vacanciesList.length % vacanciesFilter.pageSize === 0
      "
      class="flex justify-center my-5"
    >
      <button
        mat-raised-button
        color="warn"
        class="w-52 hover:scale-105 active:scale-90"
        (click)="searchVacancies()"
      >
        Load More
      </button>
    </div>
  </div>
</div>
