<app-header />

<div class="p-6">
  <div class="max-w-4xl mx-auto">
    
    <!-- Page Title -->
    <div class="mb-8">
      <h1 class="page-title">Кабинет компании</h1>
      <p class="text-[var(--text-secondary)]">Управляйте профилем и вакансиями</p>
    </div>

    <!-- Quick Actions -->
    <div class="grid md:grid-cols-2 gap-4 mb-6">
      <button (click)="goToVacancyFormPage()" class="glass-card p-5 text-left hover:scale-[1.02] transition-all group">
        <div class="flex items-center gap-4">
          <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center">
            <mat-icon class="text-white">add_circle</mat-icon>
          </div>
          <div>
            <h3 class="font-semibold text-[var(--text-primary)] group-hover:text-gradient">Новая вакансия</h3>
            <p class="text-sm text-[var(--text-secondary)]">Опубликовать вакансию</p>
          </div>
        </div>
      </button>

      <button (click)="goToCompanyPage()" class="glass-card p-5 text-left hover:scale-[1.02] transition-all group">
        <div class="flex items-center gap-4">
          <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-accent-500 to-violet-500 flex items-center justify-center">
            <mat-icon class="text-white">visibility</mat-icon>
          </div>
          <div>
            <h3 class="font-semibold text-[var(--text-primary)] group-hover:text-gradient">Профиль</h3>
            <p class="text-sm text-[var(--text-secondary)]">Публичная страница</p>
          </div>
        </div>
      </button>
    </div>

    <!-- Company Info Card -->
    <div class="glass-card p-6">
      <h2 class="section-title flex items-center gap-2">
        <mat-icon class="text-accent-500">business</mat-icon>
        Информация о компании
      </h2>
      
      <form [formGroup]="companyForm" (ngSubmit)="updateCompany()" class="space-y-4">
        <div class="grid md:grid-cols-2 gap-4">
          <div class="space-y-2">
            <label class="text-sm font-semibold text-[var(--text-primary)]">Название</label>
            <input
              type="text"
              formControlName="name"
              class="glass-input"
              placeholder="Название компании"
            />
          </div>
          
          <div class="space-y-2">
            <label class="text-sm font-semibold text-[var(--text-primary)]">Тип</label>
            <input
              type="text"
              formControlName="type"
              class="glass-input"
              placeholder="IT, Финансы..."
            />
          </div>
        </div>

        <div class="space-y-2">
          <label class="text-sm font-semibold text-[var(--text-primary)]">Описание</label>
          <textarea
            formControlName="description"
            class="glass-textarea"
            placeholder="Расскажите о компании..."
            rows="4"
          ></textarea>
        </div>

        <div class="grid md:grid-cols-2 gap-4">
          <div class="space-y-2">
            <label class="text-sm font-semibold text-[var(--text-primary)]">Email</label>
            <input
              type="email"
              formControlName="email"
              class="glass-input"
              placeholder="info@company.com"
            />
          </div>
          
          <div class="space-y-2">
            <label class="text-sm font-semibold text-[var(--text-primary)]">Телефон</label>
            <input
              type="tel"
              formControlName="phone"
              class="glass-input"
              placeholder="+7 999 123 45 67"
            />
          </div>
        </div>

        <div class="grid md:grid-cols-2 gap-4">
          <div class="space-y-2">
            <label class="text-sm font-semibold text-[var(--text-primary)]">Город</label>
            <input
              type="text"
              formControlName="city"
              class="glass-input"
              placeholder="Москва"
            />
          </div>
          
          <div class="space-y-2">
            <label class="text-sm font-semibold text-[var(--text-primary)]">Адрес</label>
            <input
              type="text"
              formControlName="address"
              class="glass-input"
              placeholder="Улица, дом"
            />
          </div>
        </div>

        <div class="space-y-2">
          <label class="text-sm font-semibold text-[var(--text-primary)]">Веб-сайт</label>
          <input
            type="url"
            formControlName="webSite"
            class="glass-input"
            placeholder="https://company.com"
          />
        </div>

        <!-- Logo Upload -->
        <div class="space-y-3">
          <label class="text-sm font-semibold text-[var(--text-primary)]">Логотип</label>
          
          <div class="flex items-center gap-4">
            <div class="flex-shrink-0">
              <div *ngIf="imageSrc || imageLocalUrl; else noImage" class="w-20 h-20 rounded-xl overflow-hidden">
                <img
                  [src]="imageLocalUrl || imageSrc"
                  alt="Логотип"
                  class="w-full h-full object-cover"
                />
              </div>
              <ng-template #noImage>
                <div class="w-20 h-20 rounded-xl bg-[var(--bg-tertiary)] flex items-center justify-center">
                  <mat-icon class="text-2xl text-[var(--text-muted)]">image</mat-icon>
                </div>
              </ng-template>
            </div>

            <label class="glass-card-subtle p-4 flex items-center gap-3 cursor-pointer hover:border-primary-500 transition-all flex-1">
              <mat-icon class="text-accent-500">cloud_upload</mat-icon>
              <div>
                <span class="text-sm font-medium text-[var(--text-primary)]">{{ imageName || 'Выбрать файл' }}</span>
                <p class="text-xs text-[var(--text-muted)]">PNG, JPG до 5MB</p>
              </div>
              <input
                #fileInput
                type="file"
                (change)="onFileSelected($event)"
                class="hidden"
                accept="image/*"
              />
            </label>
          </div>
        </div>

        <button type="submit" class="glass-btn py-3 px-6">
          Сохранить
        </button>
      </form>
    </div>
  </div>
</div>
