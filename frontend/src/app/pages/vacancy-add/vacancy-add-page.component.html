<app-header />

<div class="p-6">
  <div class="max-w-3xl mx-auto">
    <!-- Page Title -->
    <div class="mb-8">
      <h1 class="page-title">Новая вакансия</h1>
      <p class="text-[var(--text-secondary)]">Заполните информацию о вакансии</p>
    </div>

    <!-- Form Card -->
    <div class="glass-card p-6">
      <form [formGroup]="vacancyForm" (ngSubmit)="postVacancy()" class="space-y-6">
        
        <!-- Basic Info Section -->
        <div>
          <h2 class="section-title flex items-center gap-2">
            <mat-icon class="text-accent-500">info</mat-icon>
            Основная информация
          </h2>

          <div class="space-y-4">
            <div class="space-y-2">
              <label class="text-sm font-semibold text-[var(--text-primary)]">Название</label>
              <input
                type="text"
                formControlName="title"
                class="glass-input"
                placeholder="Frontend Developer"
              />
            </div>

            <div class="grid md:grid-cols-2 gap-4">
              <div class="space-y-2">
                <label class="text-sm font-semibold text-[var(--text-primary)]">Тип занятости</label>
                <input
                  type="text"
                  formControlName="employmentType"
                  class="glass-input"
                  placeholder="Полная занятость"
                />
              </div>
              <div class="space-y-2">
                <label class="text-sm font-semibold text-[var(--text-primary)]">Дедлайн</label>
                <input
                  type="date"
                  formControlName="deadlineAt"
                  class="glass-input"
                />
              </div>
            </div>
          </div>
        </div>

        <div class="glass-divider"></div>

        <!-- Requirements Section -->
        <div class="space-y-3">
          <div class="flex items-center justify-between">
            <label class="text-sm font-semibold text-[var(--text-primary)]">Требования</label>
            <button type="button" (click)="addRequirement()" class="text-sm text-[var(--accent-primary)] hover:underline flex items-center gap-1">
              <mat-icon class="text-sm">add</mat-icon> Добавить
            </button>
          </div>
          <div formArrayName="requirements" class="space-y-2">
            <div *ngFor="let ctrl of requirements.controls; let i = index" class="flex gap-2">
              <input
                [formControlName]="i"
                class="glass-input text-sm py-2 flex-1"
                placeholder="Требование..."
              />
              <button type="button" (click)="removeRequirement(i)" class="glass-btn-secondary p-2">
                <mat-icon class="text-sm">close</mat-icon>
              </button>
            </div>
          </div>
        </div>

        <div class="glass-divider"></div>

        <!-- Skills & Technologies -->
        <div class="grid md:grid-cols-2 gap-6">
          <div class="space-y-3">
            <div class="flex items-center justify-between">
              <label class="text-sm font-semibold text-[var(--text-primary)]">Навыки</label>
              <button type="button" (click)="addSkill()" class="text-sm text-[var(--accent-primary)] hover:underline flex items-center gap-1">
                <mat-icon class="text-sm">add</mat-icon>
              </button>
            </div>
            <div formArrayName="skills" class="space-y-2">
              <div *ngFor="let ctrl of skills.controls; let i = index" class="flex gap-2">
                <input
                  [formControlName]="i"
                  class="glass-input text-sm py-2 flex-1"
                  placeholder="Навык..."
                />
                <button type="button" (click)="removeSkill(i)" class="glass-btn-secondary p-2">
                  <mat-icon class="text-sm">close</mat-icon>
                </button>
              </div>
            </div>
          </div>

          <div class="space-y-3">
            <div class="flex items-center justify-between">
              <label class="text-sm font-semibold text-[var(--text-primary)]">Технологии</label>
              <button type="button" (click)="addTechnology()" class="text-sm text-[var(--accent-primary)] hover:underline flex items-center gap-1">
                <mat-icon class="text-sm">add</mat-icon>
              </button>
            </div>
            <div formArrayName="technologies" class="space-y-2">
              <div *ngFor="let ctrl of technologies.controls; let i = index" class="flex gap-2">
                <input
                  [formControlName]="i"
                  class="glass-input text-sm py-2 flex-1"
                  placeholder="Технология..."
                />
                <button type="button" (click)="removeTechnology(i)" class="glass-btn-secondary p-2">
                  <mat-icon class="text-sm">close</mat-icon>
                </button>
              </div>
            </div>
          </div>
        </div>

        <div class="glass-divider"></div>

        <!-- Salary & Experience -->
        <div class="grid md:grid-cols-2 gap-6">
          <!-- Experience -->
          <div class="space-y-3">
            <label class="text-sm font-semibold text-[var(--text-primary)]">Опыт (лет)</label>
            <div class="grid grid-cols-2 gap-3">
              <div class="space-y-1">
                <label class="text-xs text-[var(--text-muted)]">От</label>
                <input
                  type="number"
                  [formControl]="$any(experience).controls.min"
                  class="glass-input text-sm py-2"
                  placeholder="0"
                />
              </div>
              <div class="space-y-1">
                <label class="text-xs text-[var(--text-muted)]">До</label>
                <input
                  type="number"
                  [formControl]="$any(experience).controls.max"
                  class="glass-input text-sm py-2"
                  placeholder="10"
                />
              </div>
            </div>
          </div>

          <!-- Salary -->
          <div class="space-y-3">
            <label class="text-sm font-semibold text-[var(--text-primary)]">Зарплата</label>
            <div class="grid grid-cols-2 gap-3">
              <div class="space-y-1">
                <label class="text-xs text-[var(--text-muted)]">От</label>
                <input
                  type="number"
                  [formControl]="$any(salary).controls.min"
                  class="glass-input text-sm py-2"
                  placeholder="50000"
                />
              </div>
              <div class="space-y-1">
                <label class="text-xs text-[var(--text-muted)]">До</label>
                <input
                  type="number"
                  [formControl]="$any(salary).controls.max"
                  class="glass-input text-sm py-2"
                  placeholder="150000"
                />
              </div>
            </div>
            <select [formControl]="$any(salary).controls.currency" class="glass-select text-sm py-2">
              <option value="">Валюта</option>
              <option value="RUB">RUB ₽</option>
              <option value="USD">USD $</option>
              <option value="EUR">EUR €</option>
            </select>
          </div>
        </div>

        <div class="glass-divider"></div>

        <!-- Submit -->
        <button type="submit" class="glass-btn w-full py-4 text-lg">
          <mat-icon class="mr-2">publish</mat-icon>
          Опубликовать
        </button>
      </form>
    </div>
  </div>
</div>
