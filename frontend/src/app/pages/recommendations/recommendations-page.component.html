<app-header />

<div class="p-6">
  <div class="max-w-6xl mx-auto">
    <!-- Page Title -->
    <div class="mb-8">
      <h1 class="page-title">Рекомендации</h1>
      <p class="text-[var(--text-secondary)]">Вакансии, подобранные специально для вас</p>
    </div>

    <!-- No Resume Alert -->
    <div *ngIf="!resumeExists" class="glass-card p-12 text-center max-w-lg mx-auto">
      <div class="w-20 h-20 rounded-2xl bg-warning-500/20 flex items-center justify-center mx-auto mb-4">
        <mat-icon class="text-4xl text-warning-500">description</mat-icon>
      </div>
      <h2 class="text-2xl font-bold text-[var(--text-primary)] mb-2 font-display">У вас пока нет резюме</h2>
      <p class="text-[var(--text-secondary)] mb-6">
        Создайте резюме, чтобы получать персональные рекомендации вакансий
      </p>
      <button (click)="goToAccount()" class="glass-btn py-3 px-8">
        <mat-icon class="mr-2">add</mat-icon>
        Создать резюме
      </button>
    </div>

    <!-- No Recommendations -->
    <div *ngIf="resumeExists && vacanciesList?.length === 0" class="glass-card p-12 text-center max-w-lg mx-auto">
      <div class="w-20 h-20 rounded-2xl bg-[var(--bg-tertiary)] flex items-center justify-center mx-auto mb-4">
        <mat-icon class="text-4xl text-[var(--text-muted)]">search_off</mat-icon>
      </div>
      <h2 class="text-2xl font-bold text-[var(--text-primary)] mb-2 font-display">Рекомендаций пока нет</h2>
      <p class="text-[var(--text-secondary)] mb-6">
        Добавьте больше информации в резюме, чтобы мы могли подобрать подходящие вакансии
      </p>
      <button (click)="goToAccount()" class="glass-btn py-3 px-8">
        <mat-icon class="mr-2">edit</mat-icon>
        Заполнить резюме
      </button>
    </div>

    <!-- Loader -->
    <app-loader *ngIf="resumeExists && isLoading && (!vacanciesList || vacanciesList.length === 0)" message="Загрузка рекомендаций..."></app-loader>

    <!-- Vacancies Grid -->
    <div *ngIf="resumeExists && !isLoading && vacanciesList && vacanciesList.length > 0">
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        <ng-container *ngFor="let vacancy of vacanciesList">
          <app-compact-vacancy [vacancy]="vacancy"></app-compact-vacancy>
        </ng-container>
      </div>

      <!-- Load More -->
      <div *ngIf="vacanciesList && vacanciesList.length > 0 && !isFullLoaded" class="flex justify-center mt-8">
        <button (click)="loadRecommendations()" class="glass-btn-secondary px-8 py-3 flex items-center gap-2">
          <mat-icon>refresh</mat-icon>
          Загрузить ещё
        </button>
      </div>
    </div>
  </div>
</div>
